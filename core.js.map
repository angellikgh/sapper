{"version":3,"file":"core.js","sources":["src/core/utils/create_routes.js","src/core/route_manager.js","src/core/templates.js","src/core/utils/compilers.js","src/core/utils/create_app.js","src/core/generate_asset_cache.js","src/core/build.js","src/core/export.js"],"sourcesContent":["import * as path from 'path';\n\nexport default function create_routes(files) {\n\tconst routes = files\n\t\t.map(file => {\n\t\t\tif (/(^|\\/|\\\\)_/.test(file)) return;\n\n\t\t\tconst parts = file.replace(/\\.(html|js|mjs)$/, '').split('/'); // glob output is always posix-style\n\t\t\tif (parts[parts.length - 1] === 'index') parts.pop();\n\n\t\t\tconst id = (\n\t\t\t\tparts.join('_').replace(/[[\\]]/g, '$').replace(/^\\d/, '_$&').replace(/[^a-zA-Z0-9_$]/g, '_')\n\t\t\t ) || '_';\n\n\t\t\tconst dynamic = parts\n\t\t\t\t.filter(part => part[0] === '[')\n\t\t\t\t.map(part => part.slice(1, -1));\n\n\t\t\tlet pattern_string = '';\n\t\t\tlet i = parts.length;\n\t\t\tlet nested = true;\n\t\t\twhile (i--) {\n\t\t\t\tconst part = parts[i];\n\t\t\t\tconst dynamic = part[0] === '[';\n\n\t\t\t\tif (dynamic) {\n\t\t\t\t\tpattern_string = nested ? `(?:\\\\/([^/]+)${pattern_string})?` : `\\\\/([^/]+)${pattern_string}`;\n\t\t\t\t} else {\n\t\t\t\t\tnested = false;\n\t\t\t\t\tpattern_string = `\\\\/${part}${pattern_string}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst pattern = new RegExp(`^${pattern_string}\\\\/?$`);\n\n\t\t\tconst test = url => pattern.test(url);\n\n\t\t\tconst exec = url => {\n\t\t\t\tconst match = pattern.exec(url);\n\t\t\t\tif (!match) return;\n\n\t\t\t\tconst params = {};\n\t\t\t\tdynamic.forEach((param, i) => {\n\t\t\t\t\tparams[param] = match[i + 1];\n\t\t\t\t});\n\n\t\t\t\treturn params;\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\ttype: path.extname(file) === '.html' ? 'page' : 'route',\n\t\t\t\tfile,\n\t\t\t\tpattern,\n\t\t\t\ttest,\n\t\t\t\texec,\n\t\t\t\tparts,\n\t\t\t\tdynamic\n\t\t\t};\n\t\t})\n\t\t.filter(Boolean)\n\t\t.sort((a, b) => {\n\t\t\tlet same = true;\n\n\t\t\tfor (let i = 0; true; i += 1) {\n\t\t\t\tconst a_part = a.parts[i];\n\t\t\t\tconst b_part = b.parts[i];\n\n\t\t\t\tif (!a_part && !b_part) {\n\t\t\t\t\tif (same) throw new Error(`The ${a.file} and ${b.file} routes clash`);\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tif (!a_part) return -1;\n\t\t\t\tif (!b_part) return 1;\n\n\t\t\t\tconst a_is_dynamic = a_part[0] === '[';\n\t\t\t\tconst b_is_dynamic = b_part[0] === '[';\n\n\t\t\t\tif (a_is_dynamic === b_is_dynamic) {\n\t\t\t\t\tif (!a_is_dynamic && a_part !== b_part) same = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\treturn a_is_dynamic ? 1 : -1;\n\t\t\t}\n\t\t});\n\n\treturn routes;\n}","import glob from 'glob';\nimport create_routes from './utils/create_routes.js';\n\nexport let routes;\n\nexport function update({ src }) {\n\troutes = create_routes(\n\t\tglob.sync('**/*.+(html|js|mjs)', { cwd: src })\n\t);\n\n\treturn routes;\n}","import * as fs from 'fs';\nimport glob from 'glob';\nimport chalk from 'chalk';\nimport framer from 'code-frame';\nimport { locate } from 'locate-character';\n\nlet templates;\n\nfunction error(e) {\n\tif (e.title) console.error(chalk.bold.red(e.title));\n\tif (e.body) console.error(chalk.red(e.body));\n\tif (e.url) console.error(chalk.cyan(e.url));\n\tif (e.frame) console.error(chalk.grey(e.frame));\n\n\tprocess.exit(1);\n}\n\nexport function create_templates() {\n\ttemplates = glob.sync('*.html', { cwd: 'templates' })\n\t\t.map(file => {\n\t\t\tconst template = fs.readFileSync(`templates/${file}`, 'utf-8');\n\t\t\tconst status = file.replace('.html', '').toLowerCase();\n\n\t\t\tif (!/^[0-9x]{3}$/.test(status)) {\n\t\t\t\terror({\n\t\t\t\t\ttitle: `templates/${file}`,\n\t\t\t\t\tbody: `Bad template — should be a valid status code like 404.html, or a wildcard like 2xx.html`\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst index = template.indexOf('%sapper.main%');\n\t\t\tif (index !== -1) {\n\t\t\t\t// TODO remove this in a future version\n\t\t\t\tconst { line, column } = locate(template, index, { offsetLine: 1 });\n\t\t\t\tconst frame = framer(template, line, column);\n\n\t\t\t\terror({\n\t\t\t\t\ttitle: `templates/${file}`,\n\t\t\t\t\tbody: `<script src='%sapper.main%'> is unsupported — use %sapper.scripts% (without the <script> tag) instead`,\n\t\t\t\t\turl: 'https://github.com/sveltejs/sapper/issues/86',\n\t\t\t\t\tframe\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst specificity = (\n\t\t\t\t(status[0] === 'x' ? 0 : 4) +\n\t\t\t\t(status[1] === 'x' ? 0 : 2) +\n\t\t\t\t(status[2] === 'x' ? 0 : 1)\n\t\t\t);\n\n\t\t\tconst pattern = new RegExp(`^${status.split('').map(d => d === 'x' ? '\\\\d' : d).join('')}$`);\n\n\t\t\treturn {\n\t\t\t\ttest: status => pattern.test(status),\n\t\t\t\tspecificity,\n\t\t\t\trender: data => {\n\t\t\t\t\treturn template.replace(/%sapper\\.(\\w+)%/g, (match, key) => {\n\t\t\t\t\t\treturn key in data ? data[key] : '';\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tstream: (res, data) => {\n\t\t\t\t\tlet i = 0;\n\n\t\t\t\t\tfunction stream_inner() {\n\t\t\t\t\t\tif (i >= template.length) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst start = template.indexOf('%sapper', i);\n\n\t\t\t\t\t\tif (start === -1) {\n\t\t\t\t\t\t\tres.end(template.slice(i));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tres.write(template.slice(i, start));\n\n\t\t\t\t\t\tconst end = template.indexOf('%', start + 1);\n\t\t\t\t\t\tif (end === -1) {\n\t\t\t\t\t\t\tthrow new Error(`Bad template`); // TODO validate ahead of time\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst tag = template.slice(start + 1, end);\n\t\t\t\t\t\tconst match = /sapper\\.(\\w+)/.exec(tag);\n\t\t\t\t\t\tif (!match || !(match[1] in data)) throw new Error(`Bad template`); // TODO ditto\n\n\t\t\t\t\t\treturn Promise.resolve(data[match[1]]).then(datamatch => {\n\t\t\t\t\t\t\tres.write(datamatch);\n\t\t\t\t\t\t\ti = end + 1;\n\t\t\t\t\t\t\treturn stream_inner();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.resolve().then(stream_inner);\n\t\t\t\t}\n\t\t\t};\n\t\t})\n\t\t.sort((a, b) => b.specificity - a.specificity);\n}\n\nexport function render(status, data) {\n\tconst template = templates.find(template => template.test(status));\n\tif (template) return template.render(data);\n\n\treturn `Missing template for status code ${status}`;\n}\n\nexport function stream(res, status, data) {\n\tconst template = templates.find(template => template.test(status));\n\tif (template) return template.stream(res, data);\n\n\treturn `Missing template for status code ${status}`;\n}\n","import * as path from 'path';\nimport relative from 'require-relative';\n\nconst webpack = relative('webpack', process.cwd());\n\nexport let client;\nexport let server;\n\nexport function get_compilers() {\n\treturn {\n\t\tclient: webpack(\n\t\t\trequire(path.resolve('webpack.client.config.js'))\n\t\t),\n\n\t\tserver: webpack(\n\t\t\trequire(path.resolve('webpack.server.config.js'))\n\t\t)\n\t};\n}\n\n// export const client = webpack(\n// \trequire(path.resolve('webpack.client.config.js'))\n// );\n\n// export const server = webpack(\n// \trequire(path.resolve('webpack.server.config.js'))\n// );","import * as fs from 'fs';\nimport * as path from 'path';\nimport * as route_manager from '../route_manager.js';\nimport * as templates from '../templates.js';\n\nfunction posixify(file) {\n\treturn file.replace(/[/\\\\]/g, '/');\n}\n\nfunction create_app({ src, dev, entry }) {\n\t// const { routes } = route_manager;\n\troute_manager.update({ src });\n\tconst { routes } = route_manager;\n\n\tfunction create_client_main() {\n\t\tconst template = fs.readFileSync('templates/main.js', 'utf-8');\n\n\t\tconst code = `[${\n\t\t\troutes\n\t\t\t\t.filter(route => route.type === 'page')\n\t\t\t\t.map(route => {\n\t\t\t\t\tconst params = route.dynamic.length === 0 ?\n\t\t\t\t\t\t'{}' :\n\t\t\t\t\t\t`{ ${route.dynamic.map((part, i) => `${part}: match[${i + 1}]`).join(', ') } }`;\n\n\t\t\t\t\tconst file = posixify(`${src}/${route.file}`);\n\t\t\t\t\treturn `{ pattern: ${route.pattern}, params: match => (${params}), load: () => import(/* webpackChunkName: \"${route.id}\" */ '${file}') }`\n\t\t\t\t})\n\t\t\t\t.join(', ')\n\t\t}]`;\n\n\t\tlet main = template\n\t\t\t.replace(/__app__/g, posixify(path.resolve(__dirname, '../../runtime/app.js')))\n\t\t\t.replace(/__routes__/g, code)\n\t\t\t.replace(/__dev__/g, String(dev));\n\n\t\tif (dev) {\n\t\t\tconst hmr_client = posixify(require.resolve(`webpack-hot-middleware/client`));\n\t\t\tmain += `\\n\\nimport('${hmr_client}?path=/__webpack_hmr&timeout=20000'); if (module.hot) module.hot.accept();`\n\t\t}\n\n\t\tfs.writeFileSync(entry.client, main);\n\n\t\t// need to fudge the mtime, because webpack is soft in the head\n\t\tconst { atime, mtime } = fs.statSync(entry.client);\n\t\tfs.utimesSync(entry.client, new Date(atime.getTime() - 999999), new Date(mtime.getTime() - 999999));\n\t}\n\n\tfunction create_server_routes() {\n\t\tconst imports = routes\n\t\t\t.map(route => {\n\t\t\t\tconst file = posixify(`${src}/${route.file}`);\n\t\t\t\treturn route.type === 'page' ?\n\t\t\t\t\t`import ${route.id} from '${file}';` :\n\t\t\t\t\t`import * as ${route.id} from '${file}';`;\n\t\t\t})\n\t\t\t.join('\\n');\n\n\t\tconst exports = `export { ${routes.map(route => route.id)} };`;\n\n\t\tfs.writeFileSync(entry.server, `${imports}\\n\\n${exports}`);\n\n\t\tconst { atime, mtime } = fs.statSync(entry.server);\n\t\tfs.utimesSync(entry.server, new Date(atime.getTime() - 999999), new Date(mtime.getTime() - 999999));\n\t}\n\n\tcreate_client_main();\n\tcreate_server_routes();\n}\n\nexport function start_watching({ src }) {\n\tconst chokidar = require('chokidar');\n\n\tconst watch = (glob, callback) => {\n\t\tconst watcher = chokidar.watch(glob, {\n\t\t\tignoreInitial: true,\n\t\t\tpersistent: false\n\t\t});\n\n\t\twatcher.on('add', callback);\n\t\twatcher.on('change', callback);\n\t\twatcher.on('unlink', callback);\n\t};\n\n\twatch('templates/main.js', create_app);\n\n\twatch('routes/**/*.+(html|js|mjs)', () => {\n\t\troute_manager.update({ src });\n\t\tcreate_app();\n\t});\n\n\twatch('templates/**.html', () => {\n\t\ttemplates.create_templates();\n\t\t// TODO reload current page?\n\t});\n}\n\nexport default create_app;\n","import * as fs from 'fs';\nimport * as path from 'path';\nimport glob from 'glob';\nimport * as templates from './templates.js';\nimport * as route_manager from './route_manager.js';\n\nfunction ensure_array(thing) {\n\treturn Array.isArray(thing) ? thing : [thing]; // omg webpack what the HELL are you doing\n}\n\nexport default function generate_asset_cache({ src, dest, dev, client_info, server_info }) {\n\ttemplates.create_templates(); // TODO refactor this...\n\n\tconst main_file = `/client/${ensure_array(client_info.assetsByChunkName.main)[0]}`;\n\n\tconst chunk_files = client_info.assets.map(chunk => `/client/${chunk.name}`);\n\n\tconst service_worker = generate_service_worker({ chunk_files, src });\n\tconst index = generate_index(main_file);\n\n\tif (dev) {\n\t\tfs.writeFileSync(path.join(dest, 'service-worker.js'), service_worker);\n\t\tfs.writeFileSync(path.join(dest, 'index.html'), index);\n\t}\n\n\treturn {\n\t\tclient: {\n\t\t\tmain_file,\n\t\t\tchunk_files,\n\n\t\t\tmain: read(`${dest}${main_file}`),\n\t\t\tchunks: chunk_files.reduce((lookup, file) => {\n\t\t\t\tlookup[file] = read(`${dest}${file}`);\n\t\t\t\treturn lookup;\n\t\t\t}, {}),\n\n\t\t\troutes: route_manager.routes.reduce((lookup, route) => {\n\t\t\t\tlookup[route.id] = `/client/${ensure_array(client_info.assetsByChunkName[route.id])[0]}`;\n\t\t\t\treturn lookup;\n\t\t\t}, {}),\n\n\t\t\tindex,\n\t\t\tservice_worker\n\t\t},\n\n\t\tserver: {\n\t\t\tentry: path.resolve(dest, 'server', server_info.assetsByChunkName.main)\n\t\t},\n\n\t\tservice_worker\n\t};\n}\n\nfunction generate_service_worker({ chunk_files, src }) {\n\tconst assets = glob.sync('**', { cwd: 'assets', nodir: true });\n\n\troute_manager.update({ src }); // TODO refactor\n\n\tconst route_code = `[${\n\t\troute_manager.routes\n\t\t\t.filter(route => route.type === 'page')\n\t\t\t.map(route => `{ pattern: ${route.pattern} }`)\n\t\t\t.join(', ')\n\t}]`;\n\n\treturn read('templates/service-worker.js')\n\t\t.replace(/__timestamp__/g, Date.now())\n\t\t.replace(/__assets__/g, JSON.stringify(assets))\n\t\t.replace(/__shell__/g, JSON.stringify(chunk_files.concat('/index.html')))\n\t\t.replace(/__routes__/g, route_code);\n}\n\nfunction generate_index(main_file) {\n\treturn templates.render(200, {\n\t\tstyles: '',\n\t\thead: '',\n\t\thtml: '<noscript>Please enable JavaScript!</noscript>',\n\t\tmain: main_file\n\t});\n}\n\nfunction read(file) {\n\treturn fs.readFileSync(file, 'utf-8');\n}\n","process.env.NODE_ENV = 'production';\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport mkdirp from 'mkdirp';\nimport rimraf from 'rimraf';\nimport * as compilers from './utils/compilers.js';\nimport create_app from './utils/create_app.js';\nimport generate_asset_cache from './generate_asset_cache.js';\n\nexport default function build({ dest, dev, entry, src }) {\n\tmkdirp.sync(dest);\n\trimraf.sync(path.join(dest, '**/*'));\n\n\t// create main.js and server-routes.js\n\tcreate_app({ dev, entry, src });\n\n\treturn new Promise((fulfil, reject) => {\n\t\tfunction handleErrors(err, stats) {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t\tprocess.exit(1);\n\t\t\t}\n\n\t\t\tif (stats.hasErrors()) {\n\t\t\t\tconsole.error(stats.toString({ colors: true }));\n\t\t\t\treject(new Error(`Encountered errors while building app`));\n\t\t\t}\n\t\t}\n\n\t\tconst { client, server } = compilers.get_compilers(); // TODO refactor\n\n\t\tclient.run((err, client_stats) => {\n\t\t\thandleErrors(err, client_stats);\n\t\t\tconst client_info = client_stats.toJson();\n\t\t\tfs.writeFileSync(path.join(dest, 'stats.client.json'), JSON.stringify(client_info, null, '  '));\n\n\t\t\tserver.run((err, server_stats) => {\n\t\t\t\thandleErrors(err, server_stats);\n\t\t\t\tconst server_info = server_stats.toJson();\n\t\t\t\tfs.writeFileSync(path.join(dest, 'stats.server.json'), JSON.stringify(server_info, null, '  '));\n\n\t\t\t\tgenerate_asset_cache({ src, dest, dev, client_info, server_info });\n\t\t\t\tfulfil();\n\t\t\t});\n\t\t});\n\t});\n}\n","import * as path from 'path';\nimport * as sander from 'sander';\nimport express from 'express';\nimport cheerio from 'cheerio';\nimport fetch from 'node-fetch';\nimport URL from 'url-parse';\nimport generate_asset_cache from './generate_asset_cache.js';\n// import middleware from '../middleware/index.js';\n\nconst { PORT = 3000, OUTPUT_DIR = 'dist' } = process.env;\n\nconst origin = `http://localhost:${PORT}`;\n\nconst app = express();\n\nfunction read_json(file) {\n\treturn JSON.parse(sander.readFileSync(file, { encoding: 'utf-8' }));\n}\n\nexport default function exporter({ src, dest }) { // TODO dest is a terrible name in this context\n\t// Prep output directory\n\tsander.rimrafSync(OUTPUT_DIR);\n\n\tconst { service_worker } = generate_asset_cache({\n\t\tsrc, dest,\n\t\tdev: false,\n\t\tclient_info: read_json(path.join(dest, 'stats.client.json')),\n\t\tserver_info: read_json(path.join(dest, 'stats.server.json'))\n\t});\n\n\tsander.copydirSync('assets').to(OUTPUT_DIR);\n\tsander.copydirSync(dest, 'client').to(OUTPUT_DIR, 'client');\n\tsander.writeFileSync(OUTPUT_DIR, 'service-worker.js', service_worker);\n\n\t// Intercept server route fetches\n\tfunction save(res) {\n\t\tres = res.clone();\n\n\t\treturn res.text().then(body => {\n\t\t\tconst { pathname } = new URL(res.url);\n\t\t\tlet dest = OUTPUT_DIR + pathname;\n\n\t\t\tconst type = res.headers.get('Content-Type');\n\t\t\tif (type.startsWith('text/html')) dest += '/index.html';\n\n\t\t\tsander.writeFileSync(dest, body);\n\n\t\t\treturn body;\n\t\t});\n\t}\n\n\tglobal.fetch = (url, opts) => {\n\t\tif (url[0] === '/') {\n\t\t\turl = `http://localhost:${PORT}${url}`;\n\n\t\t\treturn fetch(url, opts)\n\t\t\t\t.then(r => {\n\t\t\t\t\tsave(r);\n\t\t\t\t\treturn r;\n\t\t\t\t});\n\t\t}\n\n\t\treturn fetch(url, opts);\n\t};\n\n\tapp.use(require('./middleware')()); // TODO this is filthy\n\tconst server = app.listen(PORT);\n\n\tconst seen = new Set();\n\n\tfunction handle(url) {\n\t\tif (url.origin !== origin) return;\n\n\t\tif (seen.has(url.pathname)) return;\n\t\tseen.add(url.pathname);\n\n\t\treturn fetch(url.href)\n\t\t\t.then(r => {\n\t\t\t\tsave(r);\n\t\t\t\treturn r.text();\n\t\t\t})\n\t\t\t.then(body => {\n\t\t\t\tconst $ = cheerio.load(body);\n\t\t\t\tconst hrefs = [];\n\n\t\t\t\t$('a[href]').each((i, $a) => {\n\t\t\t\t\threfs.push($a.attribs.href);\n\t\t\t\t});\n\n\t\t\t\treturn hrefs.reduce((promise, href) => {\n\t\t\t\t\treturn promise.then(() => handle(new URL(href, url.href)));\n\t\t\t\t}, Promise.resolve());\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(`Error rendering ${url.pathname}: ${err.message}`);\n\t\t\t});\n\t}\n\n\treturn handle(new URL(origin)) // TODO all static routes\n\t\t.then(() => server.close());\n}"],"names":["path.extname","fs.readFileSync","locate","path.resolve","route_manager.update","routes","fs.writeFileSync","fs.statSync","fs.utimesSync","templates.create_templates","path.join","route_manager.routes","templates.render","client","server","compilers.get_compilers","sander.readFileSync","sander.rimrafSync","sander.copydirSync","sander.writeFileSync"],"mappings":"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"}